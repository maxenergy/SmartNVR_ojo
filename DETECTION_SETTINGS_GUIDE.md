# 目标检测设置功能使用指南

## 🎯 **功能概述**

新增的目标检测设置功能允许用户自定义选择要检测和显示的目标类别，只有勾选的类别才会被检测和显示在界面上。

## 📱 **如何使用**

### 1. 进入检测设置界面

1. 打开应用主界面
2. 点击右上角的设置按钮（⚙️）
3. 在设置菜单中选择 **"检测设置"**

### 2. 配置检测参数

#### **启用/禁用目标检测**
- 使用顶部的开关控制整体目标检测功能
- 关闭后将不进行任何目标检测

#### **调整置信度阈值**
- 使用滑块调整检测置信度阈值（0.00-1.00）
- 只有置信度高于此阈值的检测结果才会显示
- 建议值：0.5-0.7

#### **选择检测类别**
- 在类别列表中勾选要检测的目标类型
- 支持80种COCO数据集类别
- 常用类别优先显示（如：人员、汽车、椅子、沙发、电视等）

### 3. 保存设置

设置会自动保存，无需手动保存操作。

## 🔧 **支持的检测类别**

### **优先类别（常用）**
- **人员** (person) - 人体检测
- **汽车** (car) - 汽车检测  
- **自行车** (bicycle) - 自行车检测
- **摩托车** (motorcycle) - 摩托车检测
- **公交车** (bus) - 公交车检测
- **卡车** (truck) - 卡车检测
- **椅子** (chair) - 椅子检测
- **沙发** (couch) - 沙发检测
- **电视** (tv) - 电视检测
- **笔记本电脑** (laptop) - 笔记本电脑检测
- **瓶子** (bottle) - 瓶子检测
- **杯子** (cup) - 杯子检测

### **其他类别**
包含COCO数据集的全部80个类别，如动物、食物、家具、电子设备等。

## ⚙️ **技术实现**

### **核心组件**

1. **DetectionSettingsManager** - 设置管理器
   - 管理用户的检测偏好设置
   - 持久化存储设置数据

2. **DetectionResultFilter** - 检测结果过滤器
   - 根据用户设置过滤YOLO检测结果
   - 应用置信度阈值和类别过滤

3. **DetectionSettingsFragment** - 设置界面
   - 提供用户友好的设置界面
   - 支持实时预览设置效果

### **集成方式**

检测过滤器已集成到 `MultiCameraView` 中，在 `updateAIResults` 方法中自动应用用户设置的过滤规则。

## 📊 **默认设置**

- **检测启用**: 开启
- **置信度阈值**: 0.5
- **启用类别**: 仅人员检测 (person)

## 🔄 **重置设置**

如需恢复默认设置：
1. 进入检测设置界面
2. 可以通过代码调用 `DetectionSettingsManager.resetToDefaults()` 方法

## 💡 **使用建议**

1. **性能优化**: 只启用必要的检测类别可以提高检测性能
2. **准确性**: 适当调高置信度阈值可以减少误检
3. **监控场景**: 根据实际监控场景选择相关类别
   - 室内监控：人员、椅子、沙发、电视、笔记本电脑
   - 交通监控：人员、汽车、自行车、摩托车、公交车、卡车
   - 办公场所：人员、椅子、笔记本电脑、杯子、瓶子

## 🐛 **故障排除**

### **检测结果不显示**
1. 检查目标检测是否启用
2. 确认相关类别已勾选
3. 调低置信度阈值
4. 确认摄像头画面中确实存在对应目标

### **误检过多**
1. 调高置信度阈值
2. 取消勾选不需要的类别

### **设置不生效**
1. 确认设置已保存
2. 重启应用
3. 检查权限设置

## 📝 **更新日志**

### v1.0.0 (2025-07-20)
- ✅ 新增目标检测设置界面
- ✅ 支持80种COCO类别选择
- ✅ 置信度阈值调节功能
- ✅ 检测结果实时过滤
- ✅ 设置持久化存储
- ✅ 与现有人脸检测系统集成

---

**注意**: 此功能需要配合YOLO目标检测模型使用，确保设备已正确加载相关模型文件。
